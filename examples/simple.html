<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <title>Sankey Javascript Demo: Spread effort 2050 Pathway</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="../ext/raphael.js" type="text/javascript"></script>
    <script src="../ext/jquery.js" type="text/javascript"></script>
    <script src="../js/sankey.js" type="text/javascript"></script>
    <script src="../js/data_prep.js" type="text/javascript"></script>
				<link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <script type='text/javascript'>

    var some_data = d3.json("https://github.com/Epieros/Sankey/blob/master/data/sample_data_adj.json", function(error, json) {
              if (error) return console.warn(error);
              });

    var label_set = ["Compromised","Cleaned","Clean","Disconnected","Failed"]
    var date_set = set_dates(some_data);
    var name_set = set_names(some_data);
    var tranistion_set = set_state(some_data, date_set, name_set);

//	console.log(date_set);
//	console.log(name_set);
//	console.log(tranistion_set);

    $(document).ready(function() {
        var sankey = new Sankey();
        var labels;
        var dateLen = date_set.length;
        var labelLen = label_set.length;

        for (i=0; i<dateLen; i++) {
	    labels = [];
	    for (j=0; j<labelLen; j++) {
		labels[j] = label_set[j]+[i];
	    } //end of for j
	    sankey.stack([i],labels);
        } //end of for i

sankey.setData([
  tranistion_set[0],tranistion_set[1],tranistion_set[2],tranistion_set[3],tranistion_set[4],tranistion_set[5],tranistion_set[6],tranistion_set[7],tranistion_set[8],tranistion_set[9],tranistion_set[10],
  tranistion_set[11],tranistion_set[12],tranistion_set[13],tranistion_set[14],tranistion_set[15],tranistion_set[16],tranistion_set[17],tranistion_set[18],tranistion_set[19],tranistion_set[20],
  tranistion_set[21],tranistion_set[22],tranistion_set[23],tranistion_set[24],tranistion_set[25],tranistion_set[26],tranistion_set[27],tranistion_set[28],tranistion_set[29],tranistion_set[30],
  tranistion_set[31],tranistion_set[32],tranistion_set[33],tranistion_set[34],tranistion_set[35],tranistion_set[36],tranistion_set[37],tranistion_set[38],tranistion_set[39],tranistion_set[40],
  tranistion_set[41],tranistion_set[42],tranistion_set[43],tranistion_set[44],tranistion_set[45],tranistion_set[46],tranistion_set[47],tranistion_set[48],tranistion_set[49],tranistion_set[50],
  tranistion_set[51],tranistion_set[52],tranistion_set[53],tranistion_set[54],tranistion_set[55],tranistion_set[56],tranistion_set[57],tranistion_set[58],tranistion_set[59],tranistion_set[60],
  tranistion_set[61],tranistion_set[62],tranistion_set[63],tranistion_set[64],tranistion_set[65],tranistion_set[66],tranistion_set[67],tranistion_set[68],tranistion_set[69],tranistion_set[70],
  tranistion_set[71],tranistion_set[72],tranistion_set[73],tranistion_set[74],tranistion_set[75],tranistion_set[76],tranistion_set[77],tranistion_set[78],tranistion_set[79],tranistion_set[80],
  tranistion_set[81],tranistion_set[82],tranistion_set[83],tranistion_set[84],tranistion_set[85],tranistion_set[86],tranistion_set[87],tranistion_set[88],tranistion_set[89],tranistion_set[90],
  tranistion_set[91],tranistion_set[92],tranistion_set[93],tranistion_set[94],tranistion_set[95],tranistion_set[96],tranistion_set[97],tranistion_set[98],tranistion_set[99],tranistion_set[100],
  tranistion_set[101],tranistion_set[102],tranistion_set[103],tranistion_set[104],tranistion_set[105],tranistion_set[106],tranistion_set[107],tranistion_set[108],tranistion_set[109],tranistion_set[110],
  tranistion_set[111],tranistion_set[112],tranistion_set[113],tranistion_set[114],tranistion_set[115],tranistion_set[116],tranistion_set[117],tranistion_set[118],tranistion_set[119]
]);
        sankey.draw();
  //      console.log(sankey.lines);
    });

    </script>
    <h1 style='width:1000px; text-align: center; margin-bottom: 0'>A very simple Sankey Diagram</h1>
    <div style='width:1000px; text-align: center; margin-top: 0'>Move your mouse over the diagram to show values</div>
    <div id='sankey' style="width:2000px;height:1400px">
      &nbsp;
    </div>
  </body>
</html>
